{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport firebase, { firestore } from 'firebase';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/firestore';\nimport 'firebase/functions';\nimport 'firebase/storage';\nimport { useEffect, useState } from 'react/cjs/react.development';\nimport { useNavigation } from '@react-navigation/native';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nvar firebaseConfig = {\n  apiKey: 'AIzaSyDfjQkD4UeSNfs1yup3oprY9sQx0ZcH4Uk',\n  authDomain: 'examenproject-211e4.firebaseapp.com',\n  projectId: 'examenproject-211e4',\n  storageBucket: 'examenproject-211e4.appspot.com',\n  messagingSenderId: '321759435624',\n  appId: '1:321759435624:web:847f5ac5e161152646d4dd'\n};\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nexport var auth = firebase.auth();\nexport function GetUsers(setUserArray, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).get().then(function (doc) {\n    setUserArray(doc.data().users);\n  }).catch(function (error) {\n    console.log('error', error);\n  });\n}\nexport function GetGameQuestions(setGameQuestions) {\n  var questionArray = [];\n  firebase.firestore().collection('Questions').get().then(function (querySnapshot) {\n    querySnapshot.forEach(function (doc) {\n      questionArray.push(doc.data().question);\n    });\n  });\n  setGameQuestions(questionArray);\n}\nexport function CreateGameSetup(questionsArray, sessionName, user) {\n  var userScore = 0;\n  var userEmail = user.email;\n  var userDisplayName = user.displayName;\n  var userAry = {\n    userEmail: userEmail,\n    userDisplayName: userDisplayName,\n    userScore: userScore\n  };\n  var ref = firebase.firestore().collection('GameSession').doc(sessionName);\n  ref.set({\n    UsersAnswerd: 0,\n    ActiveQuestion: 0,\n    Questions: questionsArray,\n    users: firebase.firestore.FieldValue.arrayUnion(userAry)\n  }).then(function () {}).catch(function (error) {\n    return console.log('error', error);\n  });\n}\nexport function doesDocExist(gameKey, setIfDocExsists) {\n  firebase.firestore().collection('GameSession').doc(gameKey).get().then(function (doc) {\n    if (doc.exists) {\n      setIfDocExsists(true);\n    }\n  });\n}\nexport function AddUserToGame(userDisplayName, userEmail, gameKey, setIfDocExsists) {\n  var userScore = 0;\n  var ary = {\n    userScore: userScore,\n    userEmail: userEmail,\n    userDisplayName: userDisplayName\n  };\n  firebase.firestore().collection('GameSession').doc(gameKey).get().then(function (doc) {\n    if (doc.exists) {\n      firebase.firestore().collection('GameSession').doc(gameKey).update({\n        users: firebase.firestore.FieldValue.arrayUnion(ary)\n      });\n    } else {}\n  });\n}\nexport function UpdateUserName(currentUserName) {\n  var currentUser = firebase.auth().currentUser;\n  currentUser.updateProfile({\n    displayName: currentUserName\n  }).then(function () {}).catch(function (error) {\n    console.log(error);\n  });\n}\nexport function SnapshotUserAnswerd(setAnswerdNum, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).onSnapshot(function (doc) {\n    setAnswerdNum(doc.data().UsersAnswerd);\n  });\n}\nexport function ResetAnswerdNum(gameKey) {\n  console.log('ResetAnswerdNum', gameKey);\n  firebase.firestore().collection('GameSession').doc(gameKey).update({\n    UsersAnswerd: 0\n  }).then(function () {}).catch(function (error) {\n    return console.log('error', error);\n  });\n}\nexport function UpdateAnswerdNum(AnswerdNum, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).update({\n    UsersAnswerd: AnswerdNum + 1\n  }).then(function () {}).catch(function (error) {\n    return console.log('error', error);\n  });\n}\nexport function UpdateActiveQuestion(activeQuestion, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).update({\n    ActiveQuestion: activeQuestion + 1\n  }).then(function () {}).catch(function (error) {\n    return console.log('error', error);\n  });\n}\nexport function SnapshotHasAnswers(setIfAnswerd) {\n  firebase.firestore().collection('GameSession').doc('pilot1').onSnapshot(function (doc) {\n    setIfAnswerd(doc.data().users);\n  });\n}\nexport function SnapShotActiveQuestion(setActiveQuestion, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).onSnapshot(function (doc) {\n    setActiveQuestion(doc.data().ActiveQuestion);\n  });\n}\nexport function GetQuestionInfo(setQuestionArray, gameKey) {\n  var ary = [];\n  firebase.firestore().collection('GameSession').doc(gameKey).get().then(function (doc) {\n    ary = _toConsumableArray(doc.data().Questions);\n\n    for (var index = 0; index < ary.length; index++) {\n      ary[index].Answers.sort(function () {\n        return Math.random() - 0.5;\n      });\n    }\n\n    ary.sort(function () {\n      return Math.random() - 0.5;\n    });\n    var size = 10;\n    var items = ary.slice(0, size);\n    setQuestionArray(items);\n  }).catch(function (error) {\n    return console.log('error', error);\n  });\n}\nexport function SnapShotUsers(setUserArray, gameKey) {\n  firebase.firestore().collection('GameSession').doc(gameKey).onSnapshot(function (doc) {\n    setUserArray(doc.data().users);\n  });\n}\nexport function UpdateUserScore(userEmail, gameKey) {\n  var ary = [];\n  var userArrayRef = firebase.firestore().collection('GameSession').doc(gameKey);\n  userArrayRef.get().then(function (doc) {\n    ary = _toConsumableArray(doc.data().users);\n\n    for (var index = 0; index < ary.length; index++) {\n      if (ary[index].userEmail === userEmail) {\n        ary[index].userScore += 1;\n        userArrayRef.update({\n          users: ary\n        });\n      }\n    }\n  });\n}","map":{"version":3,"sources":["/Users/oo/Desktop/APPutvekling/ExamenProject/firebase/Firebase.js"],"names":["firebase","firestore","useEffect","useState","useNavigation","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","apps","length","initializeApp","auth","GetUsers","setUserArray","gameKey","collection","doc","get","then","data","users","catch","error","console","log","GetGameQuestions","setGameQuestions","questionArray","querySnapshot","forEach","push","question","CreateGameSetup","questionsArray","sessionName","user","userScore","userEmail","email","userDisplayName","displayName","userAry","ref","set","UsersAnswerd","ActiveQuestion","Questions","FieldValue","arrayUnion","doesDocExist","setIfDocExsists","exists","AddUserToGame","ary","update","UpdateUserName","currentUserName","currentUser","updateProfile","SnapshotUserAnswerd","setAnswerdNum","onSnapshot","ResetAnswerdNum","UpdateAnswerdNum","AnswerdNum","UpdateActiveQuestion","activeQuestion","SnapshotHasAnswers","setIfAnswerd","SnapShotActiveQuestion","setActiveQuestion","GetQuestionInfo","setQuestionArray","index","Answers","sort","Math","random","size","items","slice","SnapShotUsers","UpdateUserScore","userArrayRef"],"mappings":"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","sourcesContent":["import firebase, { firestore } from 'firebase';\n//import React, { useContext } from 'react';\n\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/firestore';\nimport 'firebase/functions';\nimport 'firebase/storage';\nimport { useEffect, useState } from 'react/cjs/react.development';\nimport { useNavigation } from '@react-navigation/native';\nimport { Alert } from 'react-native';\n\n//import { AuthContext } from './AuthContext';\n\nvar firebaseConfig = {\n  apiKey: 'AIzaSyDfjQkD4UeSNfs1yup3oprY9sQx0ZcH4Uk',\n  authDomain: 'examenproject-211e4.firebaseapp.com',\n  projectId: 'examenproject-211e4',\n  storageBucket: 'examenproject-211e4.appspot.com',\n  messagingSenderId: '321759435624',\n  appId: '1:321759435624:web:847f5ac5e161152646d4dd',\n};\n\n//const app = firebase.initializeApp(firebaseConfig);\nif (!firebase.apps.length) {\n  // const firebaseApp =\n  firebase.initializeApp(firebaseConfig);\n}\n\nexport const auth = firebase.auth();\n\n//Get users Score and name\nexport function GetUsers(setUserArray, gameKey) {\n  //console.log('SnapShotUsers', gameKey);\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .get()\n    .then((doc) => {\n      setUserArray(doc.data().users);\n    })\n    .catch((error) => {\n      console.log('error', error);\n    });\n}\n\n// Get questions from Firebase\nexport function GetGameQuestions(setGameQuestions) {\n  let questionArray = [];\n  firebase\n    .firestore()\n    .collection('Questions')\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        questionArray.push(doc.data().question);\n      });\n    });\n  setGameQuestions(questionArray);\n}\n\n//UploadGameQuestion\nexport function CreateGameSetup(questionsArray, sessionName, user) {\n  let userScore = 0;\n  let userEmail = user.email;\n  let userDisplayName = user.displayName;\n  let userAry = { userEmail, userDisplayName, userScore };\n\n  let ref = firebase.firestore().collection('GameSession').doc(sessionName);\n\n  ref\n    .set({\n      UsersAnswerd: 0,\n      ActiveQuestion: 0,\n      Questions: questionsArray,\n      users: firebase.firestore.FieldValue.arrayUnion(userAry),\n    })\n    .then(() => {\n      /*  ref.update({\n        users: firebase.firestore.FieldValue.arrayUnion(userAry),\n      }); */\n      //console.log('game Created');\n    })\n    .catch((error) => console.log('error', error));\n}\n\nexport function doesDocExist(gameKey, setIfDocExsists) {\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        setIfDocExsists(true);\n      }\n    });\n}\n\nexport function AddUserToGame(\n  userDisplayName,\n  userEmail,\n  gameKey,\n  setIfDocExsists\n) {\n  let userScore = 0;\n  let ary = { userScore, userEmail, userDisplayName };\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        firebase\n          .firestore()\n          .collection('GameSession')\n          .doc(gameKey)\n          .update({\n            users: firebase.firestore.FieldValue.arrayUnion(ary),\n          });\n        //setIfDocExsists(true);\n      } else {\n        //setIfDocExsists(false);\n      }\n    });\n}\n\nexport function UpdateUserName(currentUserName) {\n  const currentUser = firebase.auth().currentUser;\n  currentUser\n    .updateProfile({\n      displayName: currentUserName,\n    })\n    .then(function () {\n      //console.log('document sucssesfuly');\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n\n// Update ActiveQuestion\n/* export function UpdateActiveQuestion() {\n  firebase.firestore().collection('GameSession').doc('pilot1').update({})\n}\n */\nexport function SnapshotUserAnswerd(setAnswerdNum, gameKey) {\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .onSnapshot((doc) => {\n      setAnswerdNum(doc.data().UsersAnswerd);\n      //console.log('härsds', doc.data().UsersAnswerd);\n    });\n}\n//Reset AnswerdNum\nexport function ResetAnswerdNum(gameKey) {\n  console.log('ResetAnswerdNum', gameKey);\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .update({\n      UsersAnswerd: 0,\n    })\n    .then(() => {\n      //console.log('Document successfully updated!');\n    })\n    .catch((error) => console.log('error', error));\n}\n\n//Update AnswerdNum\nexport function UpdateAnswerdNum(AnswerdNum, gameKey) {\n  // console.log('UpdateAnswerNum', gameKey);\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .update({\n      UsersAnswerd: AnswerdNum + 1,\n    })\n    .then(() => {\n      // console.log('Document successfully updated!');\n    })\n    .catch((error) => console.log('error', error));\n}\n\n//Update ActiveQuestion\nexport function UpdateActiveQuestion(activeQuestion, gameKey) {\n  //console.log('updateActiveQuestion', gameKey);\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .update({\n      ActiveQuestion: activeQuestion + 1,\n    })\n    .then(() => {\n      //console.log('Document successfully updated!');\n    })\n    .catch((error) => console.log('error', error));\n}\n\n//SnapShop on HasANswerd\nexport function SnapshotHasAnswers(setIfAnswerd) {\n  // console.log('SnapShitHasAnswerd');\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc('pilot1')\n    .onSnapshot((doc) => {\n      setIfAnswerd(doc.data().users);\n    });\n}\n\n// SnapShot on ActiveQuestion\nexport function SnapShotActiveQuestion(setActiveQuestion, gameKey) {\n  //console.log('SnapShotActibeQurstion', gameKey);\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .onSnapshot((doc) => {\n      setActiveQuestion(doc.data().ActiveQuestion);\n      //console.log('här', doc.data().ActiveQuestion);\n    });\n}\n\n// Get all the Questions and answers\nexport function GetQuestionInfo(setQuestionArray, gameKey) {\n  //console.log('GetQuestionInfo', gameKey);\n  let ary = [];\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .get()\n    .then((doc) => {\n      ary = [...doc.data().Questions];\n      for (let index = 0; index < ary.length; index++) {\n        ary[index].Answers.sort(() => Math.random() - 0.5);\n      }\n      ary.sort(() => Math.random() - 0.5);\n      const size = 10;\n      const items = ary.slice(0, size);\n      setQuestionArray(items);\n    })\n    .catch((error) => console.log('error', error));\n}\n\n// SnapShot on the users and there information\nexport function SnapShotUsers(setUserArray, gameKey) {\n  //console.log('SnapShotUsers', gameKey);\n\n  firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey)\n    .onSnapshot((doc) => {\n      setUserArray(doc.data().users);\n    });\n}\n\n// Update UserScore\nexport function UpdateUserScore(userEmail, gameKey) {\n  //console.log('UpdateUserScore !!!!!', userEmail);\n  let ary = [];\n  var userArrayRef = firebase\n    .firestore()\n    .collection('GameSession')\n    .doc(gameKey);\n\n  userArrayRef.get().then((doc) => {\n    ary = [...doc.data().users];\n    for (let index = 0; index < ary.length; index++) {\n      if (ary[index].userEmail === userEmail) {\n        ary[index].userScore += 1;\n        userArrayRef.update({\n          users: ary,\n        });\n      }\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}